## 13.1 타입스크립트의 객체 지향

자바스크립트는 전통적인 객체 지향 프로그래밍 언어에서 기대할 수 있는 일부 기능을 지원하지 않아 객체 지향을 온전히 구현하는데 부족함이 있지만 타입스크립트가 private과 같은 접근 제어자나 추상 클래스, 추상 메서드 같은 기능을 지원하면서 해결해 준다.

우리가 자주 쓰고 있는 컴포넌트도 객체의 한 형태로 컴포넌트는 스스로 책임을 져야하는 역할을 수행하면서 다른 컴포넌트 객체와 협력하는 독립적인 객체다.

우리는 이미 리액트나 뷰 같은 도구를 사용하여 DI(의존성 주입)를 활용하고 있으며 해당 패턴을 이용해 객체 간의 결합도를 낮출 수 있다. 각 컴포넌트 간의 협력 관계를 prop으로 표현할 수 있다.

웹 개발에서는 선언적인 언어 또는 문법을 사용할 때가 많으므로 제대로 된 객체 지향을 구현하기 어렵다. 일반적으로 객체 지향을 구현하려면 객체 간의 협력 관계를 먼저 고려하고 메시지를 정의하여 메시지를 수신할 알맞은 객체를 결정하는 절차를 따르지만 웹 개발에서는 디자인 요구사항이 제시되어야 그에 맞춰 마크업을 진행할 수 있으므로 협력관계를 먼저 고려하기 현실적으로 어렵다. 또한 애플리케이션의 변동 사항에 유연하게 대응하기 위해 객체 지향을 구현하는데 웹 개발의 경우 레이아웃의 변화를 예측 할 수 없다.

이에 대응하기 위해 MVP, MVC, MVVM 등의 패턴이 등장했지만 아직 객체 지향을 완벽하게 구현하는 것은 이상적인 이야기다.

프론트엔드에서 객체 지향을 효과적으로 활용하기 위해서는 레이아웃은 미확정 영역으로 두고 공통으로 사용되는 컴포넌트와 비즈니스 영역에서 객체 지향 원칙을 적용하여 설계 할 수 있을 것이다.

## 13.2 우아한형제들의 활용 방식

우아한형제들의 한 팀에서는 아래와 같은 설계 방식을 사용한다.

- 온전히 레이아웃만 담당하는 컴포넌트 영역
- 컴포넌트 영역 위에서 레이아웃과 비즈니스 로직을 연결해주는 커스텀 훅 영역
- 훅 영역 위에서 객체로서 상호 협력하는 모델 영역
- 모델 영역 위에서 API를 해석하여 모델로 전달하는 API 레이어 영역

### 1. 컴포넌트 영역

비즈니스 로직은 useCartStore와 같은 커스텀 훅에서 담당하고 컴포넌트에서는 온전히 레이아웃 영역만 담당한다.

### 2. 커스텀 훅 영역

스토어 객체 내에서 addToCart와 같은 API 호출 함수를 호출하고 addToCartRequest 시리얼라이저 함수를 호출한다.

시리얼라이저 함수는 AddToCartRequest 타입의 객체를 반환하며 매개변수로 받는 target은 RecommendProduct 타입을 가진다.

### 3. 모델 영역

RecommendProduct는 클래스로 표현된 객체로 추천 상품을 나타내며 이 객체는 다른 컴포넌트 및 모델 객체와 협력하게 된다.

### 4. API 레이어 영역

전달 받은 param을 endpoint로 요청하고 응답을 지정된 타입으로 반환하기 위한 로직이다.

객체 지향 구현 자체를 클래스라고 착각하는 경우가 많은데 클래스는 객체를 표현하는 방법의 도구로 컴포넌트를 함수형으로 선언하더라도 이는 객체이다.

리액트 훅이 나온 후 함수 컴포넌트의 사용율이 높아졌으며 공식 문서에서도 함수 컴포넌트를 권장하고 있다. 일관된 템플릿에 맞춘 컴포넌트를 많이 생성해야 할 때에는 클래스 컴포넌트로 만드는 경우도 있다. 다만 이 경우 상속 구조가 복잡해지면 코드 해석이 어렵고 디버깅도 힘들어짐을 고려하여 설계해야 한다.

## 13.3 캡슐화와 추상화

캡슐화는 객체 지향에서 끊임없이 나오는 핵심 개념 중 하나로 다른 객체 내부의 데이터를 꺼내와서 직접 다루지 않고 해당 객체에게 처리할 행위를 따로 요청함으로써 협력하는 것이다. 컴포넌트는 객체이므로 내부 데이터인 상태가 바로 캠슐화의 대상이 될 수 있으므로 컴포넌트 내의 상태와 prop을 잘 다루는 것도 캡슐화의 개념에 부합한다.

prop drilling이 심할수록 컴포넌트 간의 결합도는 높아지며 내부 처리 로직이 외부로 드러나게 된다. 이 문제를 해결하기 위해 옵저버 패턴이 등장했고 다양한 상태관리 라이브러리가 생겨났다.

최종 목적은 객체들이 유기적으로 협력하게끔 올바르게 도메인을 분리하는 것으로 객체 지향 패러다임에 매몰되기보다 어떻게 하면 유기적인 협력관계를 만들것인지, 명확하게 도메인을 분리할 수 있을지 집중해야 한다.
## 13.4 정리

객체지향에 대해 확신을 가지고 개발하기는 어렵다. 하지만 객체 지향은 현실 세계와 닮은 패러다임으로 의식하지 않고 개발하더라도 나중에 보면 객체 지향이 이미 적용되어 있을 때가 많다. 따라서 원론적인 부분에 집중하기 보다 실제 코드를 작성하며 경험하자.

객체나 책임을 신경 쓰지 않고 개발 속도에 집중하여 화면 전체를 만든 후 각 부분의 역할과 책임을 나누면서 리팩터링하는 방법도 캑체 지향을 구현하기 위한 연습이 될 수 있다. 이렇게 경험이 쌓이면 화면을 구성하기 전에 개별적인 컴포넌트를 먼저 생각하게 될 수도 있다.

설계 방식도 트레이드오프로 단기로 사용할 페이지를 만들어야 한다면 단지 동작만 하도록 빨리 코드를 작성하는게 생산성 측면에서 나을 수도 있다. 객체 지향은 유지보수를 위한 개념으로 유지보수가 필요하지 않다면 꼭 따를 필요는 없다.

현실 세계를 잘 반영하고 좋은 추상화를 어떻게 만들지 고민하며 개발한다면 변경에 유연하고 유지보수하기 쉬운 설계를 구출 할 수 있다.
