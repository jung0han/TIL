코드 포매팅은 프로그램을 해석하는 컴퓨터에는 중요하지 않지만 코드 유지 보수를 위한 가독성에는 꼭 필요한 요소다. 코드 포매팅은 겉치례의 문제가 아니고 파이썬의 가독성이야말로 파이썬이 인기 있는 이유다.

## 동료나 협업자의 신뢰를 잃는 이유

우리는 다양한 방식으로 코드를 작성하지만 동작은 동일하게 만들 수 있다.

```python
spam = ['dog', 'cat', 'moose']

# 쉼표 뒤의 공백 수나 따옴표 문자 스타일을 변형한 리스트도 여전히 유효하다.
spam = ['dog', 'cat',"moose"]
```

프로그래밍은 대부분 협동 작업으로 여러명의 프로그래머가 각자 자신의 스타일로 코딩한다면 일관성을 찾을 수 없는 난장판이 될 것이다. 코딩 스타일을 결정하는 것은 개인 취향의 문제일 수 있다. 우측 통행이나 좌측 통행 중 주행 방향을 결정하는 것과 비슷할지 모른다. 모든 사람이 같은 쪽에서 운전한다면 어느쪽인지 결정하는 것은 옳고 그름의 문제가 아니다.

## 스타일 가이드와 PEP 8

읽기 쉬운 코드를 작성하는 간단한 방법은 스타일 가이드를 따르는 것이다. [파이썬 개선 제안 8(PEP 8)](https://www.python.org/dev/peps/pep-0008/)은 파이썬 코어 개발팀이 작성한 스타일 가이드 중 하나다. 많은 파이썬 프로그래머는 이를 권위 있는 규칙 모음으로 여기지만 문서 작성자들은 `일관성을 어리석게 고집하는 것은 좁은 생각에서 나오는 허깨비`라는 섹션에서 스타일 가이드를 시행한 주된 이유가 규칙에 천착하기 위한 것이 아니라 프로젝트에서의 일관성과 가독성 유지가 목표였음을 상기시킨다.

> 일관성을 버려야 할 시점을 알아야 한다. 때로는 스타일 가이드 권장 사항이 적용되지 않을 수도 있다. 의구심이 생긴다면 스스로 최선의 판단을 내려라.

## 가로 간격

### 들여쓰기를 위한 공백 문자 사용

공백문자나 탭 문자 중 하나를 사용해 들여쓰기를 할 수 있는데 탭보다는 공백을 사용하는 방법이 모범사례이다. 그 이유는 스페이스바와 탭이 다르게 인식되기 때문인데 탭 문자인 `\t`는 렌더링이 더 모호하다.

들여쓰기 8칸을 사용할 경우 코드가 전체 코드 행 길이 제한을 넘게 되고 2칸을 사용할 경우엔 들여쓰기를 구분하기 쉽지 않다. 프로그래머는 보통 2, 4, 8, 16 같은 2의 거듭 제곱 수를 선호하는 경향이 있어 3이나 6 같은 수는 고려 대상에 넣지 않는다.

### 코드 행 내의 공백 활용

공백은 시각적으로 하나의 코드 행을 여러 부분으로 구분되어 보이게 하는 중요한 효과가 있다.

#### 연산자와 식별자 사이에 공백 한칸

```python
# 잘된 예
blanks = blanks[:i] + secretWord[i] + blanks[i + 1 :]

# 나쁜 예
blanks=blanks[:i]+secretWord[i]+blanks[i+1:]
```

공백이 없으면 `blanks[i+1:]`의 +가 네 번째 값을 추가하는 것처럼 보일 수 있지만 공백이 들어가면 +가 값에 대한 슬라이스의 일부임을 명확히 알 수 있다.

#### 구분자는 앞쪽이 아니라 뒤쪽에 공백 한 칸

```python
# 잘된 예
def spam(eggs, bacon, ham):
    weights = [42.0, 3.1415, 2.718]

# 나쁜 예
def spam(eggs,bacon,ham):
    weights = [42.0 , 3.1415 , 2.718]
```

공백을 넣지 않으면 한데 뭉쳐져 읽기 어렵게 되고 구분자 앞에 공백을 추가하면 구분자가 불필요하게 눈에 띈다.

#### 마침표의 앞뒤에는 공백을 넣지 않는다

```python
# 잘된 예
'Hello, world'.upper()

# 나쁜 예
'Hello, world' . upper()
```

공백이 없으면 객체와 속성의 연결이 강조되지만 공백을 넣으면 객체와 속성이 서로 관련 없어 보인다.

#### 함수, 메소드, 컨테이너 이름 뒤에는 공백을 넣지 않는다

```python
# 잘된 예
print('Hello, world!')
spam[2]
pet['name']

# 나쁜 예
print ('Hello, world!')
spam [2]
pet ['name']
```

함수명과 메소드명 뒤에는 괄호 쌍이 따라 붙어야 쉽게 식별 할 수 있다. 마찬가지로 인덱스, 슬라이스, 키를 쓸 때도 대괄호 앞에 공백을 넣지 말자.

#### 여는 괄호 뒤와 닫는 괄호 앞에는 공백을 넣지 않는다

```python
# 잘된 예
def spam(eggs, bacon, ham):
    weights = [42.0, 3.1415, 2.718]

# 나쁜 예
def spam( eggs, bacon, ham ):
    weights = [ 42.0, 3.1415, 2.718 ]
```

추가한 공백은 코드의 가독성을 개선하지 않으므로 전혀 필요하지 않다.
#### 코드행 끝의 주석 앞에는 공백 2칸

```python
# 잘된 예
print('Hello, world!')  # 인사말 출력

# 나쁜 예
print ('Hello, world!')# 인사말 출력
```

공백이 하나거나 없는 경우엔 주석과 코드를 구분하기 어려워진다. 저자는 행이 너무 길어지므로 주석을 코드 행 뒤에 넣지 않는 방식을 추천한다.

## 세로 간격

PEP 8에서 함수나 클래스는 두 줄의 빈 행을 넣고 클래스 내의 메소드는 빈 행 한 줄을 넣어 구분해야 한다고 명시했다.

```python
# 나쁜 예
class ExampleClass:
    def exampleMethod1():
        pass
    def exampleMethod2():
        pass
def exampleFunction():
    pass

# 좋은 예
class ExampleClass:
    def exampleMethod1():
        pass
	
    def exampleMethod2():
        pass


def exampleFunction():
    pass
```

### 세로 간격 사용 예

어떤 코드 행들을 하나의 그룹으로 묶을지는 프로그래머의 주관적인 결정에 따라 달라지므로 포메터는 함수나 메소드 또는 전역 범위 내에서 빈 행을 자동으로 수정 하지 않는다.

일반적으로 동일한 작업을 하는 영역은 길더라도 분리하지 않고 한 그룹이 여러 하위 작업들로 구성되었다는 느낌이 든다면 빈 행을 추가하여 하위 작업을 분리 할 수 있다.

### 세로 간격의 모범 사례

파이썬에서는 세미콜론으로 한 행을 여러 문으로 분리할 수 있지만 코드 행이 길어지고 읽기 어려워지므로 나눠서 작성하는 것을 권장한다.

import문도 한 행에서 여러 모듈을 가져올 수 있지만 PEP 8에서는 모듈 당 하나의 import 문을 사용하는 것을 추천하고 이는 버전 관리 시스템의 diff 도구를 사용할 때에도 시각적으로 판단하기 쉬워진다.

그리고 PEP 8에서는 import 문을 아래와 같은 세 그룹으로 묶어서 번호 순서대로 배치하는 것을 권장한다.

1. math, os, sys 등 파이썬 표준 라이브러리의 모듈
2. Selenium, Requests, Django 등 서드파티 모듈
3. 현재 작성 중인 프로그램의 일부인 로컬 모듈

### 행 길이 설정

파이썬 코드의 표준 행 길이는 80자인데 이는 1920년도 IBM이 80열 12행 짜리 천공카드를 도입하며 이후 프린터, 모니터, 명령행 창에 그대로 적용됐다.

요즘 고해상도 화면에서는 얼마든지 가로 80자 이상의 텍스트를 표시할 수 있으며 저자는 120자로 설정하는 것을 선호하는 편이다.

## 정리

코딩 스타일은 주관적이지만 대체로 무엇이 좋은 포매팅이고 나쁜 포매팅인지에 대한 합의가 이미 이뤄져있다. 파이썬 구문은 스타일에 유연하여 아무도 보지 않을 코드를 작업한다면 상관 없지만 협업을 할 경우 일반적으로 수용되는 스타일 가이드에 맞는 포매팅이 중요하다.